<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        
        
        <link rel="shortcut icon" href="../img/favicon.ico">
        <title>API - ILEE_CSK</title>
        <link href="../css/bootstrap.min.css" rel="stylesheet">
        <link href="../css/font-awesome.min.css" rel="stylesheet">
        <link href="../css/base.css" rel="stylesheet">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css">

        <script src="../js/jquery-1.10.2.min.js" defer></script>
        <script src="../js/bootstrap.min.js" defer></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
        <script>hljs.initHighlightingOnLoad();</script> 
    </head>

    <body>
        <div class="navbar fixed-top navbar-expand-lg navbar-dark bg-primary">
            <div class="container">
                <a class="navbar-brand" href="..">ILEE_CSK</a>
                <!-- Expander button -->
                <button type="button" class="navbar-toggler" data-toggle="collapse" data-target="#navbar-collapse">
                    <span class="navbar-toggler-icon"></span>
                </button>

                <!-- Expanded navigation -->
                <div id="navbar-collapse" class="navbar-collapse collapse">
                        <!-- Main navigation -->
                        <ul class="nav navbar-nav">
                            <li class="navitem">
                                <a href="../Home/" class="nav-link">Home</a>
                            </li>
                            <li class="navitem active">
                                <a href="./" class="nav-link">API</a>
                            </li>
                            <li class="navitem">
                                <a href="../Tutorial/" class="nav-link">Tutorial</a>
                            </li>
                        </ul>

                    <ul class="nav navbar-nav ml-auto">
                        <li class="nav-item">
                            <a href="#" class="nav-link" data-toggle="modal" data-target="#mkdocs_search_modal">
                                <i class="fa fa-search"></i> Search
                            </a>
                        </li>
                            <li class="nav-item">
                                <a rel="prev" href="../Home/" class="nav-link">
                                    <i class="fa fa-arrow-left"></i> Previous
                                </a>
                            </li>
                            <li class="nav-item">
                                <a rel="next" href="../Tutorial/" class="nav-link">
                                    Next <i class="fa fa-arrow-right"></i>
                                </a>
                            </li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="container">
            <div class="row">
                    <div class="col-md-3"><div class="navbar-light navbar-expand-md bs-sidebar hidden-print affix" role="complementary">
    <div class="navbar-header">
        <button type="button" class="navbar-toggler collapsed" data-toggle="collapse" data-target="#toc-collapse" title="Table of Contents">
            <span class="fa fa-angle-down"></span>
        </button>
    </div>

    
    <div id="toc-collapse" class="navbar-collapse collapse card bg-secondary">
        <ul class="nav flex-column">
            
            <li class="nav-item" data-level="1"><a href="#api" class="nav-link">API</a>
              <ul class="nav flex-column">
            <li class="nav-item" data-level="2"><a href="#general-batch-processing-pipeline" class="nav-link">General batch-processing pipeline</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#processing-individual-sample" class="nav-link">Processing individual sample</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#returns" class="nav-link">Returns</a>
              <ul class="nav flex-column">
              </ul>
            </li>
              </ul>
            </li>
        </ul>
    </div>
</div></div>
                    <div class="col-md-9" role="main">

<h1 id="api">API</h1>
<hr />
<h2 id="general-batch-processing-pipeline">General batch-processing pipeline</h2>
<p><br/></p>
<p><strong>opt_k2 (folder_path, target_channel = None):</strong></p>
<p>This functions calculates the optimal K2 for a batch of samples (raw TIFF files) to be analyzed. Please include all samples from different groups to be compared into the same document.</p>
<p>Parameters:</p>
<p>folder_path : string, a local path of your image samples. The final document name should contain an "/" in the end, for example, folder_path = 'D:/experiment/all my samples/'</p>
<p>target_channel : int, optional. <u>It should be an provided int for most of the situations.</u> If your raw TIFF file does not have the channel dimension, please use default.</p>
<p>Returns:</p>
<p>K2: float, your estimated optimal K2 for a total batch of sample for comparison</p>
<p><br/></p>
<p><strong>analyze_document_2D (folder_path, obj_channel, k2, pixel_size = 1):</strong></p>
<p>Process and analyze all the raw tiff samples in your document by 2D mode and output the result as a table (dataframe). All images are automatically transformed to 12 bit to be compatible. In 2D mode, K1 = 2.5.</p>
<p>Parameters:</p>
<p>folder_path : string, a local path of your image samples. The final document name should contain an "/" in the end, for example, folder_path = 'D:/experiment/all my samples/'</p>
<p>obj_channel : int. Your channel index of cytoskeleton fluoresence in the 4D array read from raw TIFF</p>
<p>k2 : number. The universal K2 you set. Recommend use the optimal K2 calculated by the function opt_k2</p>
<p>pixel_size : number, optional. The physical lenghth unit of your pixel, by micrometer (μm). The default is 1. If you set it into the real pixel size, the unit "PU" in your output table should be considered as μm.</p>
<p>Returns:</p>
<p>Pandas dataframe, all cytoskeleton indices. You can process it inside python IDE or export it as excel file. </p>
<p><br/></p>
<p><strong>analyze_document_3D (folder_path, obj_channel, k2, xy_unit, z_unit, pixel_size = 1, single_k = True, use_GPU = False):</strong></p>
<p>Process and analyze all the raw tiff samples in your document in 3D mode and output the result as a table (dataframe). All images are automatically transformed to 12 bit to be compatible. Please note that it can be slow if the MATLAB-based GPU acceleration is not available. In 3D mode, K1 = 10^((log10(2.5)+log10(K2))/2).</p>
<p>Parameters</p>
<p>folder_path : string, a local path of your image samples. The final document name should contain an "/" in the end, for example, folder_path = 'D:/experiment/all my samples/'</p>
<p>obj_channel : int, your channel index of cytoskeleton fluoresence in the 4D array read from raw TIFF.</p>
<p>k2 : number, the universal K2 you set. Recommend use the optimal K2 calculated by the function opt_k2.</p>
<p>xy_unit : number, the unit size of x- and y-axis by μm. Please check using ImageJ.</p>
<p>z_unit : number, the unit size of z-axis by μm, which is also your step size of stack imaging. Please check using ImageJ.</p>
<p>pixel_size : number, optional. The physical lenghth unit (on x- and y-axis) of your voxel, by micrometer (μm). The default is 1. If you set it into the real pixel size, it should be equal to the parameter xy_unit, and the unit "PU" in your output table should be considered as μm.</p>
<p>single_k : bool, optional. Whether to use single-K mode (use only K1) to save time. The default is True.</p>
<p>use_GPU : bool, optional. Whether to activate GPU acceleration. We highly recommend you turn it on if you have MATLAB and compatible GPU. The default is False.</p>
<p>Returns</p>
<p>pandas dataframe, all cytoskeleton indices. You can process it inside python IDE or export it as excel file.</p>
<p><br/></p>
<hr />
<h2 id="processing-individual-sample">Processing individual sample</h2>
<p><br/></p>
<p><strong>rearrange_image_dimension (img, target_channel = None):</strong></p>
<p>Transform your image array of any demension order (most likely x(height)-y(width)-z(stack)-channel or channel-x-y-z structure, depending on your confocal microscope) into z-x-y array with your object channel.This function depends on sorting, so your channel number must be lower than your stack number, and your stack number (z-resolution) must be lower than your x and y resolution.</p>
<p>Parameters</p>
<p>img : 3D or 4D array, the image read from a tiff file by skimage.io</p>
<p>target_channel : int, your cytoskeleton fluorescence channel index. If img is 3D array (only one channel, which is your cytoskeleton), target_channel must be None.</p>
<p>Returns</p>
<p>3D array, the image of your object channel extracted from TIFF-generated 4D array, <u>in z-x-y format</u>. </p>
<p><br/></p>
<p><strong>ILEE_2d (img, k2, k1 = 2.5, pL_type = 'pL_8', gauss_dif = True):</strong></p>
<p>In 2D mode, generate a difference image (raw_image - threshold_image) as ILEE output for downstream analysis or visualization.</p>
<p>Parameters</p>
<p>img : float 2D array. An image of z-axis maximum projection of your target channel or the 2D "raw" image. Values should be transformed into float type with 0-4095 dynamic range. For example, if you have a 12 bit int-type image, as a variable img, then it should be used as img.astype('float'); if you have a 16 bit int-type image, then you should transform img into img2 = img.astype('float')/65535*4095.</p>
<p>k2 : a number; should be your pre-determined optimal K2 for comparison purpose. </p>
<p>k1 : The default is 2.5, which can identify one-pixel-size filament.</p>
<p>pL_type : string, Laplacian matrix type. The default and recommended is 'pL_8'. </p>
<p>gauss_dif : Bool, default is True; whether the difference image is slightly gaussian-blurred for smoother render.</p>
<p>Returns</p>
<p>float 2D array, the rendered 2D difference image. </p>
<p><br/></p>
<p><strong>analyze_actin_2d_standard (img, img_dif, pixel_size = 1):</strong></p>
<p>Compute all cytoskeleton indices using 2d raw and difference image as input.</p>
<p>Parameters</p>
<p>img : float 2D array. The input 2D image. </p>
<p>img_dif : float 2D array. The difference image (raw_image - threshold_image) generated by ILEE_2d.</p>
<p>pixel_size : number, optional. The physical lenghth unit of your pixel, by micrometer (μm). The default is 1. If you set it into the real pixel size, the unit "PU" in your output table should be considered as μm.</p>
<p>Returns</p>
<p>pandas.DataFrame, all cytoskeleton indices of input sample: occupancy, linear_density, skewness, cv, Diameter_tdt, Diameter_sdt, sev_act, branching_act, anisotropy.</p>
<p><br/></p>
<p><strong>ILEE_3d (img, xy_unit, z_unit, k1, k2, single_k1 = False, use_matlab = False, use_matlabGPU = False, gauss_dif = True):</strong></p>
<p>In 3D mode, generate a difference image (raw_image - threshold_image) as ILEE output for downstream analysis or visualization.</p>
<p>Parameters</p>
<p>img : 3D array. The input 3D image. Values should be transformed into float type with 0-4095 dynamic range. For example, if you have a 12 bit int-type image, as a variable img, then it should be used as img.astype('float'); if you have a 16 bit int-type image, then you should transform img into img2 = img.astype('float')/65535*4095. </p>
<p>xy_unit : number. The unit size of voxel on x- and y-axis by μm. Please check using ImageJ.</p>
<p>z_unit : number. The unit size of voxel on z-axis by μm, which is also your step size of stack imaging. Please check using ImageJ.</p>
<p>k1 : number. ILEE K1. for 3D mode we recommend K1 = 10^((log10(2.5)+log10(K2))/2).</p>
<p>k2 : number. ILEE K2.</p>
<p>single_k1 : bool, optional. Whether to use single-K mode (use only K1) to save time. The default is False.</p>
<p>use_matlab : bool, optional. Whether to use MATLAB for ILEE. The default is False. </p>
<p>use_matlabGPU : bool, optional. Whether to activate GPU_acceleration in MATLAB. The default is False. If use_matlab is False, this makes no difference. </p>
<p>gauss_dif : Bool, optional. Whether the difference image is gaussian-blurred slightly for smoother render. Default is True. </p>
<p>Returns</p>
<p>float 3D array, the rendered 3D difference image, the same shape as input.  </p>
<p><br/></p>
<p><strong>analyze_actin_3d_standard (img, img_dif_ori, xy_unit, z_unit, oversampling_for_bundle = True, pixel_size = 1):</strong></p>
<p>Compute all cytoskeleton indices using 3d raw and difference image as input.</p>
<p>Parameters</p>
<p>img : 3D array. Input 3D image</p>
<p>img_dif_ori : 3D array. The difference image to define the cytoskeleton components.</p>
<p>xy_unit : number. The unit size of voxel on x- and y-axis by μm. Please check using ImageJ.</p>
<p>z_unit : number. The unit size of voxel on z-axis by μm, which is also your step size of stack imaging. Please check using ImageJ.</p>
<p>oversampling_for_bundle : bool, optional. Whether to use oversampled image to calculated diameter indices. Recommend to turn on for accuracy. The default is True.</p>
<p>pixel_size : number, optional. The physical lenghth unit (on x- and y-axis) of your voxel, by micrometer (μm). The default is 1. If you set it into the real pixel size, it should be equal to the parameter xy_unit, and the unit "PU" in your output table should be considered as μm.</p>
<h2 id="returns">Returns</h2>
<p>pandas.DataFrame, all cytoskeleton indices of input sample: occupancy, linear_density, skewness, cv, Diameter_tdt, Diameter_sdt, sev_act, branching_act, anisotropy.</p></div>
            </div>
        </div>

        <footer class="col-md-12">
            <hr>
            <p>Documentation built with <a href="https://www.mkdocs.org/">MkDocs</a>.</p>
        </footer>
        <script>
            var base_url = "..",
                shortcuts = {"help": 191, "next": 78, "previous": 80, "search": 83};
        </script>
        <script src="../js/base.js" defer></script>
        <script src="../search/main.js" defer></script>

        <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="searchModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="searchModalLabel">Search</h4>
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
            </div>
            <div class="modal-body">
                <p>
                    From here you can search these documents. Enter
                    your search terms below.
                </p>
                <form>
                    <div class="form-group">
                        <input type="search" class="form-control" placeholder="Search..." id="mkdocs-search-query" title="Type search term here">
                    </div>
                </form>
                <div id="mkdocs-search-results"></div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div><div class="modal" id="mkdocs_keyboard_modal" tabindex="-1" role="dialog" aria-labelledby="keyboardModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="keyboardModalLabel">Keyboard Shortcuts</h4>
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
            </div>
            <div class="modal-body">
              <table class="table">
                <thead>
                  <tr>
                    <th style="width: 20%;">Keys</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td class="help shortcut"><kbd>?</kbd></td>
                    <td>Open this help</td>
                  </tr>
                  <tr>
                    <td class="next shortcut"><kbd>n</kbd></td>
                    <td>Next page</td>
                  </tr>
                  <tr>
                    <td class="prev shortcut"><kbd>p</kbd></td>
                    <td>Previous page</td>
                  </tr>
                  <tr>
                    <td class="search shortcut"><kbd>s</kbd></td>
                    <td>Search</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>

    </body>
</html>
